#ifndef DRV_SI1145_H_
#define DRV_SI1145_H_

#include <zephyr/device.h>
#include <zephyr/sys/util.h>


#define SI1145_PART_ID  0x45
#define SI1145_HWKEY    0x17

#define SI1145_REG_PART_ID        0x00
#define SI1145_REG_INT_CFG        0x03
#define SI1145_REG_IRQ_ENABLE     0x04
#define SI1145_REG_IRQ_MODE1      0x05
#define SI1145_REG_IRQ_MODE2      0x06
#define SI1145_REG_HW_KEY         0x07
#define SI1145_REG_MEAS_RATE      0x08
#define SI1145_REG_ALS_RATE       0x09
#define SI1145_REG_PS_LED21       0x0F
#define SI1145_REG_PS_LED3        0x10
#define SI1145_REG_UCOEF0         0x13
#define SI1145_REG_UCOEF1         0x14
#define SI1145_REG_UCOEF2         0x15
#define SI1145_REG_UCOEF3         0x16
#define SI1145_REG_PARAM_WR       0x17
#define SI1145_REG_COMMAND        0x18
#define SI1145_REG_RESPONSE       0x20
#define SI1145_REG_IRQ_STATUS     0x21
#define SI1145_REG_ALS_VIS_DATA0  0x22
#define SI1145_REG_ALS_VIS_DATA1  0x23
#define SI1145_REG_ALS_IR_DATA0   0x24
#define SI1145_REG_ALS_IR_DATA1   0x25
#define SI1145_REG_PS1_DATA0      0x26
#define SI1145_REG_PS1_DATA1      0x27
#define SI1145_REG_PS2_DATA0      0x28
#define SI1145_REG_PS2_DATA1      0x29
#define SI1145_REG_PS3_DATA0      0x2A
#define SI1145_REG_PS3_DATA1      0x2B
#define SI1145_REG_AUX_DATA0      0x2C
#define SI1145_REG_AUX_DATA1      0x2D
#define SI1145_REG_PARAM_RD       0x2E
#define SI1145_REG_CHIP_STAT      0x30

#define SI1145_CMD_PARAM_QUERY 0b10000000
#define SI1145_CMD_PARAM_SET   0b10100000
#define SI1145_CMD_RESET       0b00000001
#define SI1145_CMD_BUSADDR     0b00000010
#define SI1145_CMD_PS_FORCE    0b00000101
#define SI1145_CMD_ALS_FORSE   0b00000110
#define SI1145_CMD_PSALS_FORSE 0b00000111
#define SI1145_CMD_PS_PAUSE    0b00001001
#define SI1145_CMD_ALS_PAUSE   0b00001010
#define SI1145_CMD_PSALS_PAUSE 0b00001011
#define SI1145_CMD_PS_AUTO     0b00001101
#define SI1145_CMD_ALS_AUTO    0b00001110
#define SI1145_CMD_PSALS_AUTO  0b00001111

#define SI1145_PARAM_I2C_ADDR             0x00
#define SI1145_PARAM_CHLIST               0x01
#define SI1145_PARAM_PSLED12_SELECT       0x02
#define SI1145_PARAM_PSLED3_SELECT        0x03
#define SI1145_PARAM_PS_ENCODING          0x05
#define SI1145_PARAM_ALS_ENCODING         0x06
#define SI1145_PARAM_PS1_ADCMUX           0x07
#define SI1145_PARAM_PS2_ADCMUX           0x08
#define SI1145_PARAM_PS3_ADCMUX           0x09
#define SI1145_PARAM_PS_ADC_COUNTER       0x0A
#define SI1145_PARAM_PS_ADC_GAIN          0x0B
#define SI1145_PARAM_PS_ADC_MISC          0x0C
#define SI1145_PARAM_ALS_IR_ADCMUX        0x0E
#define SI1145_PARAM_AUX_ADCMUX           0x0F
#define SI1145_PARAM_ALS_VIS_ADC_COUNTER  0x10
#define SI1145_PARAM_ALS_VIS_ADC_GAIN     0x11
#define SI1145_PARAM_ALS_VIS_ADC_MISC     0x12
#define SI1145_PARAM_LED_REC              0x1C
#define SI1145_PARAM_ALS_IR_ADC_COUNTER   0x1D
#define SI1145_PARAM_ALS_IR_ADC_GAIN      0x1E
#define SI1145_PARAM_ALS_IR_ADC_MISC      0x1F

#define SI1145_PARAM_CHLIST__EN_EV    (1 << 7)
#define SI1145_PARAM_CHLIST__EN_AUX   (1 << 6)
#define SI1145_PARAM_CHLIST__EN_ALS_IR  (1 << 5)
#define SI1145_PARAM_CHLIST__EN_ALS_VIS  (1 << 4)
#define SI1145_PARAM_CHLIST__EN_PS3    (1 << 2)
#define SI1145_PARAM_CHLIST__EN_PS2    (1 << 1)
#define SI1145_PARAM_CHLIST__EN_PS1    (1 << 0)

#define SI1145_PARAM_PS1_ADCMUX__LARGE_IR  0x03
#define SI1145_PARAM_PS1_ADCMUX__SMALL_IR  0x00

#define SI1145_PARAM_PS_ADC_COUNTER__PS_ADC_REC_BIT  4

#define SI1145_PARAM_PS_ADC_MISC__PS_RANGE     (1 << 5)
#define SI1145_PARAM_PS_ADC_MISC__PS_ADC_MODE  (1 << 2)

#define SI1145_PARAM_ALS_IR_ADCMUX__SMALL_IR   0x0
#define SI1145_PARAM_ALS_IR_ADCMUX__LARGE_IR  (0x03 << 3)

#define SI1145_PARAM_ALS_IR_ADC_COUNTER__IR_ADC_REC_BIT  4

#define SI1145_PARAM_ALS_VIS_ADC_COUNTER__VIS_ADC_REC_BIT  4

#define SI1145_PARAM_ALS_VIS_ADC_MISC__VIS_RANGE (1 << 5)

#define SI1145_PARAM_ALS_IR_ADC_MISC__IR_RANGE   (1 << 5)


struct si1145_data {
	uint16_t uv;
};

struct si1145_config {
	const struct i2c_dt_spec i2c;
};

#endif /* DRV_SI1145_H_ */